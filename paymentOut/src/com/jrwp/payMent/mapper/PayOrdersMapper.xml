<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jrwp.payMent.dao.PayOrdersMapper">
    <resultMap id="BaseResultMap" type="com.jrwp.payMent.entity.PayOrders">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="ID" property="id" jdbcType="DECIMAL"/>
        <result column="USERID" property="userid" jdbcType="DECIMAL"/>
        <result column="MACHINECORE" property="machinecore" jdbcType="OTHER"/>
        <result column="MACHINEIP" property="machineip" jdbcType="OTHER"/>
        <result column="PAYTYPE" property="paytype" jdbcType="DECIMAL"/>
        <result column="PAYSTATUS" property="paystatus" jdbcType="DECIMAL"/>
        <result column="PAYMONEY" property="paymoney" jdbcType="DECIMAL"/>
        <result column="CREATTIME" property="creattime" jdbcType="TIMESTAMP"/>
        <result column="PAYIDFORWX" property="payidforwx" jdbcType="DECIMAL"/>
        <result column="QRCODEURLFORWX" property="qrcodeurlforwx" jdbcType="OTHER"/>
        <result column="PAYIDFORALI" property="payidforali" jdbcType="DECIMAL"/>
        <result column="QRCODEURLFORALI" property="qrcodeurlforali" jdbcType="OTHER"/>
        <result column="RELPAYTYPE" property="relpaytype" jdbcType="DECIMAL"/>
        <result column="ORDERNUMBER" property="ordernumber" jdbcType="OTHER"/>
        <result column="PAYTIME" property="paytime" jdbcType="TIMESTAMP"/>
    </resultMap>
    <resultMap id="orderMap" type="com.jrwp.payMent.entity.PayOrders">

        <id column="ID" property="id" jdbcType="DECIMAL"/>

        <result column="MACHINECORE" property="machinecore" jdbcType="OTHER"/>
        <result column="MACHINEIP" property="machineip" jdbcType="OTHER"/>
        <result column="PAYTYPE" property="paytype" jdbcType="DECIMAL"/>
        <result column="PAYSTATUS" property="paystatus" jdbcType="DECIMAL"/>
        <result column="PAYMONEY" property="paymoney" jdbcType="DECIMAL"/>
        <result column="CREATTIME" property="creattime" jdbcType="TIMESTAMP"/>
        <result column="PAYIDFORWX" property="payidforwx" jdbcType="DECIMAL"/>
        <result column="QRCODEURLFORWX" property="qrcodeurlforwx" jdbcType="OTHER"/>
        <result column="PAYIDFORALI" property="payidforali" jdbcType="DECIMAL"/>
        <result column="QRCODEURLFORALI" property="qrcodeurlforali" jdbcType="OTHER"/>
        <result column="RELPAYTYPE" property="relpaytype" jdbcType="DECIMAL"/>
        <result column="ORDERNUMBER" property="ordernumber" jdbcType="OTHER"/>
        <result column="PAYTIME" property="paytime" jdbcType="TIMESTAMP"/>
        <result column="USERID" property="userid" jdbcType="DECIMAL"/>
        <association property="user" javaType="com.jrwp.core.entity.Core_User">
            <result property="fullName" column="fullname" javaType="String"
                    jdbcType="VARCHAR"/>
            <result property="phone" column="phone" javaType="String"
                    jdbcType="VARCHAR"/>

        </association>
        <collection property="orderDetails" ofType="com.jrwp.payMent.entity.PayOrderDetails">
            <id column="DID" property="id"/>
            <result column="WORKPROCESSNUMBER" property="workprocessnumber" jdbcType="OTHER"/>
            <result column="dpaymoney" property="paymoney" jdbcType="NUMERIC"/>
            <result column="ISWRITE" property="iswrite" jdbcType="NUMERIC"/>
            <association property="policeClassService" javaType="com.jrwp.payMent.entity.PoliceClassService">
                <result property="serCode" column="SER_CODE" javaType="String" jdbcType="VARCHAR"/>
                <result property="serName" column="SER_NAME" javaType="String" jdbcType="VARCHAR"/>
                <result property="pcCode" column="PC_CODE" javaType="String" jdbcType="VARCHAR"/>
                <result property="price" column="PRICE" javaType="double" jdbcType="NUMERIC"/>
            </association>
        </collection>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        ID, USERID, MACHINECORE, MACHINEIP, PAYTYPE, PAYSTATUS, PAYMONEY, CREATTIME, PAYIDFORWX,
        QRCODEURLFORWX, PAYIDFORALI, QRCODEURLFORALI, RELPAYTYPE, ORDERNUMBER, PAYTIME
    </sql>
    <!--查询当前用户的订单-->
    <select id="getOrderList" resultMap="orderMap">
        select p.*,d.orderid,d. workcorde,d.workprocessnumber,d.paymoney dpaymoney,d.id did,d.iswrite,s.*,u.fullname,u.phone
        from PAY_ORDERS p,pay_orderdetails d,policeclass_service s,core_user u
        where p.id=d.orderid  and d.workcorde=s.ser_code and p.userid = u.id and u.id=#{userid}

        <if test="paystatus !=null and paystatus!=''">
            and p.paystatus = #{paystatus}
        </if>
        <if test="begintime !=null and begintime!=''">
            and to_date(to_char(p.paytime,'yyyy-mm-dd'),'yyyy-mm-dd') &gt;= to_date(#{begintime},'yyyy-mm-dd')
        </if>
        <if test="endtime !=null and endtime!=''">
            and to_date(to_char(p.paytime,'yyyy-mm-dd'),'yyyy-mm-dd') &lt;= to_date(#{endtime},'yyyy-mm-dd')
        </if>
        <if test="workprocessnumber !=null and workprocessnumber!=''">
            and p.workprocessnumber = #{workprocessnumber}
        </if>
        order by p.creattime desc
    </select>
    <!--查询部门的订单-->
    <select id="getOrderListBydeptid" resultMap="orderMap">
        select p.*,d.orderid,d. workcorde,d.workprocessnumber,d.paymoney dpaymoney,d.id did,d.iswrite,s.*,u.fullname,u.phone
        from PAY_ORDERS p,pay_orderdetails d,policeclass_service s,core_user u
        where p.id=d.orderid  and d.workcorde=s.ser_code and p.userid = u.id and u.deptid=#{deptid}


        <if test="paystatus !=null and paystatus!=''">
            and p.paystatus = #{paystatus}
        </if>
        <if test="begintime !=null and begintime!=''">
            and to_date(to_char(p.paytime,'yyyy-mm-dd'),'yyyy-mm-dd') &gt;= to_date(#{begintime},'yyyy-mm-dd')
        </if>
        <if test="endtime !=null and endtime!=''">
            and to_date(to_char(p.paytime,'yyyy-mm-dd'),'yyyy-mm-dd') &lt;= to_date(#{endtime},'yyyy-mm-dd')
        </if>
        <if test="workprocessnumber !=null and workprocessnumber!=''">
            and p.workprocessnumber = #{workprocessnumber}
        </if>
        order by p.creattime desc
    </select>
    <!--查询所有的订单-->
    <select id="getAllOrderList" resultMap="orderMap">
        select p.*,d.orderid,d. workcorde,d.workprocessnumber,d.paymoney dpaymoney,d.id did,d.iswrite,s.*,u.fullname,u.phone
        from PAY_ORDERS p,pay_orderdetails d,policeclass_service s,core_user u
        where p.id=d.orderid  and d.workcorde=s.ser_code and p.userid = u.id

        <if test="paystatus !=null and paystatus!=''">
            and p.paystatus = #{paystatus}
        </if>
        <if test="begintime !=null and begintime!=''">
            and to_date(to_char(p.paytime,'yyyy-mm-dd'),'yyyy-mm-dd') &gt;= to_date(#{begintime},'yyyy-mm-dd')
        </if>
        <if test="endtime !=null and endtime!=''">
            and to_date(to_char(p.paytime,'yyyy-mm-dd'),'yyyy-mm-dd') &lt;= to_date(#{endtime},'yyyy-mm-dd')
        </if>
        <if test="workprocessnumber !=null and workprocessnumber!=''">
            and p.workprocessnumber = #{workprocessnumber}
        </if>
        order by p.creattime desc
    </select>



    <select id="getOrderByid" resultMap="orderMap">
       select p.*,d.orderid,d. workcorde,d.workprocessnumber,d.paymoney dpaymoney,d.id did,d.iswrite,s.*,u.fullname,u.phone
        from PAY_ORDERS p,pay_orderdetails d,policeclass_service s,core_user u
        where p.id=d.orderid  and d.workcorde=s.ser_code and p.userid = u.id and
       p.id=#{id}
  </select>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.math.BigDecimal">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from PAY_ORDERS
        where ID = #{id,jdbcType=DECIMAL}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.math.BigDecimal">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from PAY_ORDERS
        where ID = #{id,jdbcType=DECIMAL}
    </delete>
    <insert id="insert" parameterType="com.jrwp.payMent.entity.PayOrders">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into PAY_ORDERS (ID, USERID, MACHINECORE,
        MACHINEIP, PAYTYPE, PAYSTATUS,
        PAYMONEY, CREATTIME, PAYIDFORWX,
        QRCODEURLFORWX, PAYIDFORALI, QRCODEURLFORALI,
        RELPAYTYPE, ORDERNUMBER, PAYTIME
        )
        values (#{id,jdbcType=DECIMAL}, #{userid,jdbcType=DECIMAL}, #{machinecore,jdbcType=OTHER},
        #{machineip,jdbcType=OTHER}, #{paytype,jdbcType=DECIMAL}, #{paystatus,jdbcType=DECIMAL},
        #{paymoney,jdbcType=DECIMAL}, #{creattime,jdbcType=TIMESTAMP}, #{payidforwx,jdbcType=DECIMAL},
        #{qrcodeurlforwx,jdbcType=OTHER}, #{payidforali,jdbcType=DECIMAL}, #{qrcodeurlforali,jdbcType=OTHER},
        #{relpaytype,jdbcType=DECIMAL}, #{ordernumber,jdbcType=OTHER}, #{paytime,jdbcType=TIMESTAMP}
        )
    </insert>
    <insert id="insertSelective" parameterType="com.jrwp.payMent.entity.PayOrders">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into PAY_ORDERS
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="userid != null">
                USERID,
            </if>
            <if test="machinecore != null">
                MACHINECORE,
            </if>
            <if test="machineip != null">
                MACHINEIP,
            </if>
            <if test="paytype != null">
                PAYTYPE,
            </if>
            <if test="paystatus != null">
                PAYSTATUS,
            </if>
            <if test="paymoney != null">
                PAYMONEY,
            </if>
            <if test="creattime != null">
                CREATTIME,
            </if>
            <if test="payidforwx != null">
                PAYIDFORWX,
            </if>
            <if test="qrcodeurlforwx != null">
                QRCODEURLFORWX,
            </if>
            <if test="payidforali != null">
                PAYIDFORALI,
            </if>
            <if test="qrcodeurlforali != null">
                QRCODEURLFORALI,
            </if>
            <if test="relpaytype != null">
                RELPAYTYPE,
            </if>
            <if test="ordernumber != null">
                ORDERNUMBER,
            </if>
            <if test="paytime != null">
                PAYTIME,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=DECIMAL},
            </if>
            <if test="userid != null">
                #{userid,jdbcType=DECIMAL},
            </if>
            <if test="machinecore != null">
                #{machinecore,jdbcType=OTHER},
            </if>
            <if test="machineip != null">
                #{machineip,jdbcType=OTHER},
            </if>
            <if test="paytype != null">
                #{paytype,jdbcType=DECIMAL},
            </if>
            <if test="paystatus != null">
                #{paystatus,jdbcType=DECIMAL},
            </if>
            <if test="paymoney != null">
                #{paymoney,jdbcType=DECIMAL},
            </if>
            <if test="creattime != null">
                #{creattime,jdbcType=TIMESTAMP},
            </if>
            <if test="payidforwx != null">
                #{payidforwx,jdbcType=DECIMAL},
            </if>
            <if test="qrcodeurlforwx != null">
                #{qrcodeurlforwx,jdbcType=OTHER},
            </if>
            <if test="payidforali != null">
                #{payidforali,jdbcType=DECIMAL},
            </if>
            <if test="qrcodeurlforali != null">
                #{qrcodeurlforali,jdbcType=OTHER},
            </if>
            <if test="relpaytype != null">
                #{relpaytype,jdbcType=DECIMAL},
            </if>
            <if test="ordernumber != null">
                #{ordernumber,jdbcType=OTHER},
            </if>
            <if test="paytime != null">
                #{paytime,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.jrwp.payMent.entity.PayOrders">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update PAY_ORDERS
        <set>
            <if test="userid != null">
                USERID = #{userid,jdbcType=DECIMAL},
            </if>
            <if test="machinecore != null">
                MACHINECORE = #{machinecore,jdbcType=OTHER},
            </if>
            <if test="machineip != null">
                MACHINEIP = #{machineip,jdbcType=OTHER},
            </if>
            <if test="paytype != null">
                PAYTYPE = #{paytype,jdbcType=DECIMAL},
            </if>
            <if test="paystatus != null">
                PAYSTATUS = #{paystatus,jdbcType=DECIMAL},
            </if>
            <if test="paymoney != null">
                PAYMONEY = #{paymoney,jdbcType=DECIMAL},
            </if>
            <if test="creattime != null">
                CREATTIME = #{creattime,jdbcType=TIMESTAMP},
            </if>
            <if test="payidforwx != null">
                PAYIDFORWX = #{payidforwx,jdbcType=DECIMAL},
            </if>
            <if test="qrcodeurlforwx != null">
                QRCODEURLFORWX = #{qrcodeurlforwx,jdbcType=OTHER},
            </if>
            <if test="payidforali != null">
                PAYIDFORALI = #{payidforali,jdbcType=DECIMAL},
            </if>
            <if test="qrcodeurlforali != null">
                QRCODEURLFORALI = #{qrcodeurlforali,jdbcType=OTHER},
            </if>
            <if test="relpaytype != null">
                RELPAYTYPE = #{relpaytype,jdbcType=DECIMAL},
            </if>
            <if test="ordernumber != null">
                ORDERNUMBER = #{ordernumber,jdbcType=OTHER},
            </if>
            <if test="paytime != null">
                PAYTIME = #{paytime,jdbcType=TIMESTAMP},
            </if>
        </set>
        where ID = #{id,jdbcType=DECIMAL}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.jrwp.payMent.entity.PayOrders">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update PAY_ORDERS
        set USERID = #{userid,jdbcType=DECIMAL},
        MACHINECORE = #{machinecore,jdbcType=OTHER},
        MACHINEIP = #{machineip,jdbcType=OTHER},
        PAYTYPE = #{paytype,jdbcType=DECIMAL},
        PAYSTATUS = #{paystatus,jdbcType=DECIMAL},
        PAYMONEY = #{paymoney,jdbcType=DECIMAL},
        CREATTIME = #{creattime,jdbcType=TIMESTAMP},
        PAYIDFORWX = #{payidforwx,jdbcType=DECIMAL},
        QRCODEURLFORWX = #{qrcodeurlforwx,jdbcType=OTHER},
        PAYIDFORALI = #{payidforali,jdbcType=DECIMAL},
        QRCODEURLFORALI = #{qrcodeurlforali,jdbcType=OTHER},
        RELPAYTYPE = #{relpaytype,jdbcType=DECIMAL},
        ORDERNUMBER = #{ordernumber,jdbcType=OTHER},
        PAYTIME = #{paytime,jdbcType=TIMESTAMP}
        where ID = #{id,jdbcType=DECIMAL}
    </update>
</mapper>